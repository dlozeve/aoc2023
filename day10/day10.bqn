nâ€¿mâ†â‰¢gridâ†>â€¢FLines"input"

Dirsâ†âŠ‘"|-LJ7F"âŠ¸=/âŸ¨âŸ¨Â¯1â€¿0,1â€¿0âŸ©,âŸ¨0â€¿Â¯1,0â€¿1âŸ©,âŸ¨Â¯1â€¿0,0â€¿1âŸ©,âŸ¨Â¯1â€¿0,0â€¿Â¯1âŸ©,âŸ¨0â€¿Â¯1,1â€¿0âŸ©,âŸ¨0â€¿1,1â€¿0âŸ©âŸ©Ë™
Advanceâ†{
  'S'=(âŠ‘ğ•©)âŠ‘grid ? ğ•© ;
  nextposâ†(âŠ‘ğ•©)+âŠ‘(-Â´âŒ½2â†‘ğ•©)âŠ¸â‰¢Â¨âŠ¸/Dirs(âŠ‘ğ•©)âŠ‘grid
  âŸ¨nextposâŸ©âˆ¾ğ•©
}

sposâ†m(âŒŠâˆ˜Ã·Ëœâˆ¾|)/â¥Šgrid='S'
startâ†âŸ¨spos+0â€¿1,sposâŸ© # works for my input
pathâ†âŒ½AdvanceâŸ(nÃ—m)start
â€¢Show âŒŠ2Ã·Ëœ1-Ëœâ‰ path

# First method, using the parity of the number of vertical pipes crossed on each side
# Only takes into account the ones connecting above, because "FJ" is equivalent to a single "|"
pathmaskâ†1âŠ¸+âŒ¾(pathâŠ¸âŠ‘) nâ€¿mâ¥Š0
cleangridâ†'.'Ë™Â¨âŒ¾((Â¬pathmask)âŠ¸(/â—‹â¥Š))grid
inmaskâ†(Â¬pathmask)âˆ§â‰(â†•m){âˆ¨Â´2|+Â´Â¨âˆŠâŸœ"JL|"Â¨ğ•¨(â†‘â‹ˆâ†“)ğ•©}âŒœ<Ë˜cleangrid
â€¢Show +Â´â¥Šinmask

# Second method for part 2, using Pick's theorem and the shoelace formula
# https://en.wikipedia.org/wiki/Pick%27s_theorem
# https://en.wikipedia.org/wiki/Shoelace_formula#Shoelace_formula
# Area inside the polygon, using the shoelace formula (determinant)
aâ†|2Ã·Ëœ-Â´+Ë(âŒ½Ë˜1âŠ¸âŒ½)âŠ¸Ã—>path
# Number of points in the boundary = length of the path
bâ†â‰ path
# Pick's formula to compute the number of points inside the polygon
â€¢Show âŒˆa+1-bÃ·2

## Display the path in the terminal as Unicode box drawing characters
# ReplaceCharsâ†âŠ‘(=âŸœ"|-FJL7.S"/"â”ƒâ”â”â”›â”—â”“ â–ˆ"Ë™)
# â€¢Out â¥Šâˆ¾âŸœ(@+10)Ë˜ReplaceCharsÂ¨cleangrid

## Generate an image of the path and its interior
# âŸ¨PBM,PPMâŸ©â†â€¢Import"../../bqn-graphics/pnm.bqn"
# pixelsâ†3â€¿3âŠ¸â¥ŠÂ¨âŸ¨
#   9â¥Š0â€¿1â€¿0,
#   0â€¿0â€¿0â€¿1â€¿1â€¿1â€¿0â€¿0â€¿0,
#   0â€¿0â€¿0â€¿0â€¿1â€¿1â€¿0â€¿1â€¿0,
#   0â€¿1â€¿0â€¿1â€¿1â€¿0â€¿0â€¿0â€¿0,
#   0â€¿1â€¿0â€¿0â€¿1â€¿1â€¿0â€¿0â€¿0,
#   0â€¿0â€¿0â€¿1â€¿1â€¿0â€¿0â€¿1â€¿0,
#   9â¥Š0,
#   9â¥Š1,
#   9â¥Š1,
# âŸ©
# ReplaceCharsPixelsâ†âŠ‘(=âŸœ"|-FJL7.SI"/pixelsË™)
# â€¢Out PBM Â¬âˆ¾Ëâˆ¾Ë˜Â´Ë˜ReplaceCharsPixelsÂ¨ 'I'Ë™Â¨âŒ¾(inmaskâŠ¸(/â—‹â¥Š)) cleangrid

## With color representing the distance from the start
# âŸ¨InfernoâŸ©â†â€¢Import"../../bqn-graphics/colormaps.bqn"
# pixgridâ†ReplaceCharsPixelsÂ¨cleangrid
# coloroffsetâ†1500
# colorsâ†âŒŠ255Ã—InfernoÂ¨(coloroffset+2Ã·Ëœâ‰ path)Ã·Ëœ+Â´path{ğ•©âŠ¸+âŒ¾(ğ•¨âŠ¸âŠ‘)nâ€¿mâ¥Š0}Â¨coloroffset+âŒŠË(âŒ½â‰âŠ¢)â†•â‰ path
# â€¢Out PPM >âˆ¾Ëâˆ¾Ë˜Â´Ë˜colors{ğ•¨âŠ¸Ã—Â¨ğ•©}Â¨pixgrid
